<% provide(:title, @location.name) %>
<h1>
  Location Selected
</h1>
<table class="table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Address</th>
      <th>Food Type</th>
      <th>Cost</th>
      
    </tr>
  </thead>

  <tbody>
   
      <tr>
        <td><%= @location.name %></td>
        <td><%= @location.address %></td>
        <td><%= @location.food %></td>
        <td><%= @location.price %></td>
        <td>&nbsp<%= link_to ' Edit ', edit_location_path(@location) %>&nbsp</td>
        <td><%= link_to ' Destroy ', @location, method: :delete, data: { confirm: 'Are you sure?'}%></td>
        
      </tr>
    
  </tbody>
</table>
<hr>
<div class="center">
  <h4>
    Invite people to Lunch!
  </h4>
 <script type="text/javascript">
function sende() {
           var selected = [],
           location = "<%= @location.name %>";
maillist = document.getElementById("maillist");
for (var i = 0; i < maillist.getElementsByTagName("option").length; i++) {
    var option = maillist.getElementsByTagName("option")[i];
    if (option.selected) {
        selected.push(option.value);
    }
}
console.log(selected, location);
jQuery.ajax({

    data: { selected: selected, place: location},
        type: 'post',
      url: "controller/invite/:maillist",

    });
}

 </script> 

   <span class="input-xlarge uneditable-input" value="<%= @location.name %>"><%=@location.name%></span> 

  <select id="maillist" name="maillist[]" form="mailform" multiple="multiple"/>
  

  <% @users.each do |user| %>
  
  <option value="<%=user.email%>"  ><%= user.name %></option>
  
  <%end%>
  <input type="hidden" name="place" value="<%= @location.name %>">
  
  </div>
  <div class="left">
  <span class="help-inline">Use CTRL or Command to select multiple users</span> 
</div>
<div class="center">
  <button onclick='sende();' class: "btn btn-large btn-success">Send</button>
</select>
<br>